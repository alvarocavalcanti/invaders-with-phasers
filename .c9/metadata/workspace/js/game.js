{"filter":false,"title":"game.js","tooltip":"/js/game.js","undoManager":{"mark":7,"position":7,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":100,"column":6},"action":"insert","lines":["window.onload = function() {","\t    \tvar game = new Phaser.Game(800, 600, Phaser.AUTO, 'invaders-with-phaser', {preload: preload, create: create, update: update});","","\t\tvar enemies;","\t\tvar bullets = [];","\t    \tvar ship;","\t    \tvar cursors;","\t    \tvar fireButton;","\t    \tvar bullet;","\t    \tvar bulletTime = 0;","","\t    \tfunction preload () {","\t    \t\tgame.load.spritesheet('ship','img/ship_24x25.png', 24, 25, 5);","\t    \t\tgame.load.spritesheet('bullet','img/shot_14x14.png', 14, 14);","\t    \t\tgame.load.spritesheet('enemy', 'img/enemy_21x21.png', 21, 21, 3);","\t    \t}","","\t    \tfunction create () {","\t    \t\tgame.physics.startSystem(Phaser.Physics.ARCADE);","\t    \t\t","\t    \t\tenemies = game.add.group();","\t    \t\tenemies.enableBody = true;","\t    \t\tenemies.physicsBodyType = Phaser.Physics.ARCADE;","","\t    \t\tship = game.add.sprite(game.world.centerX, game.world.height - 50, 'ship');","\t    \t\tship.anchor.setTo(0.5, 0.5);","\t    \t\tgame.physics.enable(ship, Phaser.Physics.ARCADE);","\t    \t\t","\t    \t\tship.body.collideWorldBounds = true;","","\t    \t\tship.animations.add('idle', [2]);","\t    \t\tship.animations.add('left', [1,0]);","\t    \t\tship.animations.add('right', [3,4]);","","\t    \t\tship.animations.play('idle', 15, true);","","\t    \t\tship.body.drag.setTo(200,200);","\t   \t\t","\t   \t\tvar enemyCount = 50;","\t   \t\tfor (var i = 0; i < enemyCount; i++) {","\t\t\t\tcreateEnemy(enemies, game.world.centerX + (i * 20));","\t   \t\t}","","\t    \t\tenemies.setAll('anchor.x', 0.5);","\t    \t\tenemies.setAll('anchor.y', 0.5);","\t    \t\t","\t    \t\tenemies.setAll('body.collideWorldBounds', true);","\t    \t\tenemies.setAll('body.velocity.x', -200);","\t    \t\tenemies.setAll('body.bounce.x', 1);","","\t    \t\tcursors = game.input.keyboard.createCursorKeys();","\t    \t\tfireButton = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);","\t    \t}","\t    \t","\t    \tfunction createEnemy(enemyGroup, x) {","\t\t    var enemy = enemyGroup.create(x, 20, 'enemy');","\t\t    ","\t    \t    game.physics.enable(enemy, Phaser.Physics.ARCADE);","\t    \t    enemy.animations.add('anim', [2,1,0,1]);","    \t\t    enemy.animations.play('anim', 4, true);","    \t\t    ","    \t\t    return enemy;","\t    \t}","","\t    \tfunction update () {","\t    \t\tif (cursors.left.isDown) {","\t    \t\t\tship.body.acceleration.x = -200;","\t    \t\t\tif (ship.animations.currentAnim.name != 'left')","\t    \t\t\t\tship.animations.play('left', 15, false);","\t    \t\t} else if (cursors.right.isDown) {","\t    \t\t\tship.body.acceleration.x = 200;","\t    \t\t\tif (ship.animations.currentAnim.name != 'right')","\t    \t\t\t\tship.animations.play('right', 15, false);","\t    \t\t} else {","\t    \t\t\tship.body.acceleration.x = 0;","\t    \t\t\tship.animations.play('idle', 15, false);","\t    \t\t}","","\t    \t\tif (fireButton.isDown) {","\t    \t\t\tshoot();","\t    \t\t}","\t    \t\t","\t    \t\t","\t    \t\t","\t    \t\t","\t    \t}","","\t    \tfunction shoot () {","\t    \t\tif (game.time.now > bulletTime) {","\t\t    \t\tvar bullet = game.add.sprite(ship.x, ship.y - (ship.height/2), 'bullet');","\t\t    \t\tbullet.anchor.setTo(0.5, 0.5);","\t\t    \t\tbullet.animations.add('glow');","\t\t    \t\tbullet.animations.play('glow', 30, true);","\t\t    \t\tgame.physics.enable(bullet, Phaser.Physics.ARCADE);","\t\t    \t\tbullet.body.velocity.y = -300;","\t\t    \t\tbulletTime = game.time.now + 400;","\t\t    \t\tbullets.push(bullet)","\t    \t\t}","\t    \t}","","\t    }"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":0,"column":16},"action":"remove","lines":["window.onload = "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":8},"end":{"row":0,"column":9},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":9},"end":{"row":0,"column":10},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":10},"end":{"row":0,"column":11},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":11},"end":{"row":0,"column":12},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":12},"end":{"row":0,"column":13},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":13},"end":{"row":0,"column":14},"action":"insert","lines":["t"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":16,"column":0},"end":{"row":16,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1418832074840,"hash":"3d0d252e713e4d4e106108937e840c89296616c2"}